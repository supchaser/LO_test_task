# Тестовое техническое задание:

Разработать REST API на Go для управления сущностями Task с асинхронным логгированием действий через канал.

Функционал:
- GET /tasks - получить список задач (фильтрация по статусу)
- GET /tasks/{id} - получить задачу по ID
- POST /tasks - создать задачу

Требования:
- Структура Task и формат логов - на своё усмотрение
- Асинхронное логирование (через канал и отдельную горутину)
- Чистая архитектура
- Только стандартные библиотеки (net/http/sync/context и пр.)
- Хранилище in-memory (своя реализация, без готовых библиотек)
- Поддержка graceful shutdown
- README.md с инструкцией по сборке и запуску

## Решение

### Архитектура проекта

- Чистая архитектура
```
    cmd/            → Точка входа (main)
    internal/
    app/            → Ядро приложения
        models/     → Модели
        delivery/   → Хэндлеры
        usecase/    → Бизнес-логика
        repository/ → Хранилище (in-memory)
    config/         → Конфигурация
    middleware/     → Мидлвари
    utils/          → Вспомогательные утилиты
```

### Описание API

1. Создание задачи:

- Метод: `POST /tasks`

- Тело запроса:

```json
{
    "title": "Название задачи",
    "description": "Описание задачи"
}
```

- Успешный ответ (201 Created):
```json
{
    "id": 123,
    "title": "Название задачи",
    "description": "Описание задачи",
    "status": "pending",
    "created_at": "2025-07-31T11:17:18.650814493+03:00",
    "updated_at": "2025-07-31T11:17:18.650814493+03:00"
}
```

- Ошибки:
  - 400 - неверный формат запроса
  - 500 - внутренняя ошибка сервера

2. Получение задачи:

- Метод: `GET /tasks/{id}`

- Успешный ответ (200 OK):

```json
{
    "id": 123,
    "title": "Название задачи",
    "description": "Описание задачи",
    "status": "pending",
    "created_at": "2025-08-13T11:26:38.826883588+03:00",
    "updated_at": "2025-08-13T11:26:38.826883588+03:00"
}
```

- Ошибки:

  - 400 - неверный ID задачи
  - 404 - задача не найдена
  - 500 - внутренняя ошибка сервера

3. Получение списка задач:

- Метод: `GET /tasks`

- Параметры:
  - status - фильтр по статусу (опционально)
  
  Пример запроса с фильтрацией: `GET /tasks?status=done`

- Успешный ответ (200 OK):

```json
{
    "id": 1755073598826,
    "title": "Название задачи",
    "description": "Описание задачи",
    "status": "pending",
    "created_at": "2025-08-13T11:26:38.826883588+03:00",
    "updated_at": "2025-08-13T11:26:38.826883588+03:00"
},
{
    "id": 1755073883001,
    "title": "Название другой задачи",
    "description": "Описание другой задачи",
    "status": "pending",
    "created_at": "2025-08-13T11:31:23.001478493+03:00",
    "updated_at": "2025-08-13T11:31:23.001478493+03:00"
}
```

- Ошибки:
  - 500 - внутренняя ошибка сервера

4. Обновление задачи: 

- Метод: `PUT /tasks/{id}`

- Тело запроса:

```json
{
    "title": "Обновленное название",
    "description": "Обновленное описание",
    "status": "done"
}
```

- Успешный ответ (200 OK):
```json
{
	"id": 1755073598826,
	"title": "Обновленное название",
	"description": "Обновленное описание",
	"status": "done",
	"created_at": "2025-08-13T11:26:38.826883588+03:00",
	"updated_at": "2025-08-13T11:33:30.340985953+03:00"
}
```

- Ошибки:
  - 400 - неверный ID или формат запроса
  - 404 - задача не найдена
  - 500 - внутренняя ошибка сервера

5. Удаление задачи
- Метод: DELETE /tasks/{id}

- Успешный ответ: 204 No Content

- Ошибки:
  - 400 - неверный ID задачи
  - 404 - задача не найдена
  - 500 - внутренняя ошибка сервера

### Настройка окружения

**Пример файла .env:**

```.env
SERVER_PORT="8080"
```

### Некоторые команды по работе с проектом

`make run` - запуск программы

`make test` - запуск тестов

### Тестирование

- ~70% покрытия юнит тестами;
- для тестирования использовался инструмент `gomock`.
